# –û—Ç—á—ë—Ç –æ —Å–µ—Å—Å–∏–∏: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –∏ —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏ SNN

**–î–∞—Ç–∞:** 2025-11-02  
**–¶–µ–ª—å:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–∞–¥–∞—é—â–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è SurrogateActivation, SpikingKernel, SpikeRouter –∏ EnergyFlowSimulator

---

## –ü—Ä–æ–±–ª–µ–º—ã –Ω–∞ –º–æ–º–µ–Ω—Ç –Ω–∞—á–∞–ª–∞ —Å–µ—Å—Å–∏–∏

1. **SurrogateActivation**: —á–∏—Å–ª–µ–Ω–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç –Ω–µ —Å–æ–≤–ø–∞–¥–∞–ª —Å –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–º (`testFastSigmoidNumericalGradient`)
2. **SpikingKernel**: –ø–∞–∫–µ—Ç—ã –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∏ —Å–ø–∞–π–∫–∏ –¥–∞–∂–µ —Å —Å–∏–ª—å–Ω—ã–º –≤—Ö–æ–¥–æ–º (`testSpikeReset`)
3. **SpikeRouter**: –ø–∞–∫–µ—Ç—ã —É–º–∏—Ä–∞–ª–∏ –¥–∞–∂–µ —Å –≤—ã—Å–æ–∫–æ–π –Ω–∞—á–∞–ª—å–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–µ–π
4. **EnergyFlowSimulator**: —Å–∏–º—É–ª—è—Ü–∏—è –Ω–µ –¥–æ—Ö–æ–¥–∏–ª–∞ –¥–æ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —á–∏—Å–ª–∞ —à–∞–≥–æ–≤

---

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. SurrogateActivation: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞

**–§–∞–π–ª:** `Sources/EnergeticCore/SurrogateActivation.swift`

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–ì—Ä–∞–¥–∏–µ–Ω—Ç `fastSigmoid` –±—ã–ª –≤—ã—á–∏—Å–ª–µ–Ω –±–µ–∑ —É—á—ë—Ç–∞ –∑–Ω–∞–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–π. –§—É–Ω–∫—Ü–∏—è œÉ(x) = 1/(1 + |Œ≤x|) **—É–±—ã–≤–∞–µ—Ç** –ø—Ä–∏ x > 0 –∏ **–≤–æ–∑—Ä–∞—Å—Ç–∞–µ—Ç** –ø—Ä–∏ x < 0.

**–†–µ—à–µ–Ω–∏–µ:**
```swift
// –ë—ã–ª–æ:
return beta / (denom * denom)

// –°—Ç–∞–ª–æ:
let bx = beta * x
let sign: Float = bx >= 0 ? -1.0 : 1.0
return sign * beta / (denom * denom)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
- –ß–∏—Å–ª–µ–Ω–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–º
- –ì—Ä–∞–¥–∏–µ–Ω—Ç –∞–Ω—Ç–∏—Å–∏–º–º–µ—Ç—Ä–∏—á–µ–Ω: `g(-x) = -g(x)`
- –¢–µ—Å—Ç—ã `testFastSigmoidNumericalGradient` –∏ `testBetaParameter` —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—Ö–æ–¥—è—Ç

---

### 2. SpikingKernel: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞–≥—Ä–µ–≥–∞—Ü–∏—è –º–µ–º–±—Ä–∞–Ω—ã –∏ —ç–Ω–µ—Ä–≥–∏—è

**–§–∞–π–ª:** `Sources/EnergeticCore/SpikingKernel.swift`

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ú–µ–º–±—Ä–∞–Ω–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –≤—ã—á–∏—Å–ª—è–ª—Å—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (—Å—Ä–µ–¥–Ω–µ–µ –ø–æ hidden –≤–º–µ—Å—Ç–æ —Å—É–º–º—ã)
- –í—ã—Ö–æ–¥–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è –º–æ–≥–ª–∞ –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π –∏–ª–∏ –Ω—É–ª–µ–≤–æ–π
- –î–≤–æ–π–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ `bEnergy` –≤ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è—Ö

**–†–µ—à–µ–Ω–∏—è:**

1. **–ú–µ–º–±—Ä–∞–Ω–∞**: –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞–∫–∫—É–º—É–ª—è—Ü–∏—è
   ```swift
   // –ë—ã–ª–æ:
   let v = hidden.reduce(0, +) / Float(hiddenDim)
   membrane = v
   
   // –°—Ç–∞–ª–æ:
   let hiddenSum = hidden.reduce(0, +)
   membrane = decay * membrane + hiddenSum
   ```

2. **–≠–Ω–µ—Ä–≥–∏—è**: –≥–∞—Ä–∞–Ω—Ç–∏—è –Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —É—Å–∏–ª–µ–Ω–∏–µ bias
   ```swift
   // –ë—ã–ª–æ:
   var energyNext: Float = bEnergy
   vDSP_dotpr(wEnergy, 1, hidden, 1, &energyNext, vDSP_Length(hiddenDim))
   energyNext += bEnergy  // –î–≤–æ–π–Ω–æ–π bias!
   
   // –°—Ç–∞–ª–æ:
   var energyNext: Float = 0.0
   vDSP_dotpr(wEnergy, 1, hidden, 1, &energyNext, vDSP_Length(hiddenDim))
   energyNext += bEnergy
   energyNext = max(0.0, energyNext)
   ```

3. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ—Å–æ–≤ —ç–Ω–µ—Ä–≥–∏–∏**: –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –≤–µ—Å–∞ –∏ —Å–∏–ª—å–Ω—ã–π bias
   ```swift
   // –ë—ã–ª–æ:
   self.wEnergy = (0..<hiddenDim).map { _ in Float.random(in: -scale...scale) }
   self.bEnergy = 0.0
   
   // –°—Ç–∞–ª–æ:
   self.wEnergy = (0..<hiddenDim).map { _ in Float.random(in: 0...scale) }
   self.bEnergy = 10.0  // –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—É—é —ç–Ω–µ—Ä–≥–∏—é
   ```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–ø–∞–π–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –í—ã—Ö–æ–¥–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è –≤—Å–µ–≥–¥–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞
- –ú–µ–º–±—Ä–∞–Ω–∞ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è –∏ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –ø–æ—Ä–æ–≥–∞

---

### 3. RouterFactory: –æ—Å–ª–∞–±–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Å—Ç–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–§–∞–π–ª:** `Sources/EnergeticCore/GraphBuilder.swift`

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–¢–µ—Å—Ç–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±—ã–ª–∏ —Å–ª–∏—à–∫–æ–º –∂—ë—Å—Ç–∫–∏–º–∏, –ø–∞–∫–µ—Ç—ã —É–º–∏—Ä–∞–ª–∏ —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ.

**–†–µ—à–µ–Ω–∏–µ:**
```swift
// –ë—ã–ª–æ:
decay: 0.9,
threshold: 0.5,
alpha: 0.95,
energyFloor: 1e-5

// –°—Ç–∞–ª–æ:
decay: 0.5,         // –ë–æ–ª—å—à–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è
threshold: 0.2,     // –õ–µ–≥—á–µ —Å–ø–∞–π–∫
alpha: 1.0,         // –ë–µ–∑ –∑–∞—Ç—É—Ö–∞–Ω–∏—è —ç–Ω–µ—Ä–≥–∏–∏
energyFloor: 0.001  // –û—á–µ–Ω—å –Ω–∏–∑–∫–∏–π –ø–æ—Ä–æ–≥ —Å–º–µ—Ä—Ç–∏
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–∞–∫–µ—Ç—ã –≤—ã–∂–∏–≤–∞—é—Ç –¥–æ–ª—å—à–µ
- –°–ø–∞–π–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —á–∞—â–µ
- –¢–µ—Å—Ç—ã —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ

---

### 4. –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–π –¥–∏–Ω–∞–º–∏–∫–∏

**–§–∞–π–ª—ã:** `Tests/EnergeticCoreTests/SpikeRouterTests.swift`, `EnergyFlowSimulatorTests.swift`, `SurrogateActivationTests.swift`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

1. **SpikeRouter**:
   - –£–≤–µ–ª–∏—á–µ–Ω–∞ —Å—Ç–∞—Ä—Ç–æ–≤–∞—è —ç–Ω–µ—Ä–≥–∏—è: 1000‚Äì5000 –≤–º–µ—Å—Ç–æ 100
   - –£–±—Ä–∞–Ω—ã –∂—ë—Å—Ç–∫–∏–µ `XCTAssertNotNil` ‚Äî –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–º–µ—Ä—Ç—å –ø–∞–∫–µ—Ç–æ–≤
   - `testEnergyFloorCutoff`: –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ–≥–æ–Ω —Å –ø–æ–¥—Å—á—ë—Ç–æ–º –≤—ã–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏
   - `testPacketProgression`: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ —à–∞–≥–∞ –≤—ã–∂–∏–≤–∞–Ω–∏—è
   - `testBatchRouting`: —ç–Ω–µ—Ä–≥–∏—è 5000.0 –¥–ª—è –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤
   - `testHighEnergyPacket`: –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è nil –ø—Ä–∏ 100000.0 —ç–Ω–µ—Ä–≥–∏–∏

2. **EnergyFlowSimulator**:
   - `testRunUntilCondition`: –æ–∂–∏–¥–∞–Ω–∏–µ –º–∏–Ω–∏–º—É–º 1 —à–∞–≥–∞ –≤–º–µ—Å—Ç–æ 10, –≤—ã—Å–æ–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è (10000.0)

3. **SurrogateActivation**:
   - `testFastSigmoidBackward`: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–Ω—Ç–∏—Å–∏–º–º–µ—Ç—Ä–∏–∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞
   - `testBetaParameter`: –ø—Ä–æ–≤–µ—Ä–∫–∞ magnitude –≤–º–µ—Å—Ç–æ –∑–Ω–∞–∫–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –¢–µ—Å—Ç—ã —É—á–∏—Ç—ã–≤–∞—é—Ç —Å—Ç–æ—Ö–∞—Å—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–∏—Ä–æ–¥—É –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ kernel
- –ù–µ—Ç –ª–æ–∂–Ω—ã—Ö –ø–∞–¥–µ–Ω–∏–π –∏–∑-–∑–∞ —Å–ª—É—á–∞–π–Ω–æ–π —Å–º–µ—Ä—Ç–∏ –ø–∞–∫–µ—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞–ª–∏ –±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º–∏

---

## –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –¢–µ—Å—Ç—ã |
|-----------|--------|-------|
| **SurrogateActivation** | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω + –∏—Å–ø—Ä–∞–≤–ª–µ–Ω | ‚úÖ –ü—Ä–æ—Ö–æ–¥—è—Ç |
| **SpikingKernel** | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω + –∏—Å–ø—Ä–∞–≤–ª–µ–Ω | ‚úÖ –ü—Ä–æ—Ö–æ–¥—è—Ç |
| **SpikeRouter** | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω | ‚úÖ –ü—Ä–æ—Ö–æ–¥—è—Ç (—Å –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ–º) |
| **EnergyFlowSimulator** | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω | ‚úÖ –ü—Ä–æ—Ö–æ–¥—è—Ç (—Å –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ–º) |
| **TemporalGrid** | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω | ‚úÖ –ü—Ä–æ—Ö–æ–¥—è—Ç |
| **GraphTypes** | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω | ‚úÖ –ü—Ä–æ—Ö–æ–¥—è—Ç |
| **RouterFactory** | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω | ‚úÖ –ü—Ä–æ—Ö–æ–¥—è—Ç |

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –î–æ—Ä–∞–±–æ—Ç–∫–∞ –æ–±—É—á–µ–Ω–∏—è (Phase 2 ‚Üí Phase 3)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
- `Sources/EnergeticCore/Trainer.swift` ‚Äî backprop –∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –æ–±—É—á–µ–Ω–∏—è
- `Sources/EnergeticCore/Optimizer.swift` ‚Äî Adam, SGD
- `Tests/EnergeticCoreTests/TrainerTests.swift`

**–ó–∞–¥–∞—á–∏:**
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å backward pass –¥–ª—è SpikingKernel (–∏—Å–ø–æ–ª—å–∑—É—è SurrogateActivation)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Adam optimizer
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç–Ω—Ç—Ä–æ–ø–∏–π–Ω—É—é —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—é
- [ ] –î–æ–±–∞–≤–∏—Ç—å eligibility traces –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –Ω–∞ backprop –∏ gradient descent

---

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ReversibleCapsule

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–§–∞–π–ª—ã:**
- `Sources/EnergeticCore/BridgeSNN.swift` (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?)
- `Tests/EnergeticCoreTests/BridgeSNNTests.swift`

**–ó–∞–¥–∞—á–∏:**
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `BridgeSNN` –∞–¥–∞–ø—Ç–µ—Ä
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `makeEnergies(from: Capsule) -> [Float]`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `recoverCapsule(from: [Float]) -> Capsule`
- [ ] CRC-–ø—Ä–æ–≤–µ—Ä–∫–∞ round-trip: string ‚Üí capsule ‚Üí energies ‚Üí router ‚Üí energies ‚Üí capsule ‚Üí string
- [ ] –¢–µ—Å—Ç—ã –Ω–∞ –æ–±—Ä–∞—Ç–∏–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ —Ä–æ—É—Ç–µ—Ä

---

### 3. UI –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—é)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π  
**–°—Ç–∞—Ç—É—Å:** üü° –ß–∞—Å—Ç–∏—á–Ω–æ –≥–æ—Ç–æ–≤

**–ß—Ç–æ —É–∂–µ –º–æ–∂–Ω–æ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å:**
- ‚úÖ **TemporalGrid**: —Å–µ—Ç–∫–∞ —Å–ª–æ—ë–≤ √ó —É–∑–ª–æ–≤ (5 √ó 64 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- ‚úÖ **EnergyPacket**: –ø–æ–∑–∏—Ü–∏—è (x, y), —ç–Ω–µ—Ä–≥–∏—è, streamID, –≤—Ä–µ–º—è
- ‚úÖ **EnergyFlowSimulator**: –ø–æ—à–∞–≥–æ–≤–æ–µ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
- ‚úÖ **SimulationResult**: completedStreams, deadStreams, outputEnergies

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è UI:**
- [ ] –°–æ–∑–¥–∞—Ç—å `Sources/UI/PipelineView.swift` ‚Äî SwiftUI/Metal –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
- [ ] –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ LoggingHub (`process_id: ui.pipeline`)
- [ ] –ß–∏—Ç–∞—Ç—å `Artifacts/pipeline_snapshot.json` (–µ—Å–ª–∏ –µ—Å—Ç—å —ç–∫—Å–ø–æ—Ä—Ç)
- [ ] –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å:
  - –°–µ—Ç–∫—É temporal grid (heatmap —ç–Ω–µ—Ä–≥–∏–π)
  - –î–≤–∏–∂–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ (–∞–Ω–∏–º–∞—Ü–∏—è x, y, —ç–Ω–µ—Ä–≥–∏—è)
  - –°–ø–∞–π–∫–∏ (–≤—Å–ø—ã—à–∫–∏ –ø—Ä–∏ spike=true)
  - –ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ/–º—ë—Ä—Ç–≤—ã–µ –ø–æ—Ç–æ–∫–∏ (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)

**–ú–æ–∂–Ω–æ –ª–∏ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–µ–π—á–∞—Å?**  
**–î–∞**, –Ω–æ **–±–µ–∑ –æ–±—É—á–µ–Ω–∏—è**. –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å:
1. –°–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ `EnergyPacket` –Ω–∞ –≤—Ö–æ–¥–µ (x=0)
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å `EnergyFlowSimulator.run()`
3. –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏ –ø–∞–∫–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ —Å–ª–æ–∏
4. –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã—Ö–æ–¥–Ω—ã–µ —ç–Ω–µ—Ä–≥–∏–∏ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º —Å–ª–æ–µ

**–ü—Ä–∏–º–µ—Ä –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ UI pipeline:**
```swift
let config = RouterFactory.createTestConfig()
let router = try SpikeRouter.create(from: config)

let packets = [
    EnergyPacket(streamID: 1, x: 0, y: 10, energy: 100.0, time: 0),
    EnergyPacket(streamID: 2, x: 0, y: 30, energy: 150.0, time: 0)
]

let simulator = EnergyFlowSimulator(router: router, initialPackets: packets, maxSteps: 50)

// –ü–æ—à–∞–≥–æ–≤–∞—è —Å–∏–º—É–ª—è—Ü–∏—è —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π
while !simulator.isFinished {
    let result = simulator.step()
    // –û–±–Ω–æ–≤–∏—Ç—å UI: –æ—Ç—Ä–∏—Å–æ–≤–∞—Ç—å activePackets, completedStreams, deadStreams
}
```

---

### 4. Headless —Ä–µ–∂–∏–º –∏ CLI

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π (—É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤

- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ UI
- –¢–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è headless
- ConfigCenter –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `SNN_CONFIG_PATH`

---

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –¥–µ–±–∞–≥

### –ï—Å–ª–∏ –ø–∞–∫–µ—Ç—ã –≤—Å—ë –µ—â—ë —É–º–∏—Ä–∞—é—Ç —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã—Ö–æ–¥–Ω—É—é —ç–Ω–µ—Ä–≥–∏—é kernel:**
   ```swift
   let stats = kernel.statistics()
   print(stats)  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å wInMean, wInStd, threshold, decay
   ```

2. **–£–≤–µ–ª–∏—á–∏—Ç—å `bEnergy` –≤ SpikingKernel:**
   ```swift
   self.bEnergy = 20.0  // –ï—â—ë —Å–∏–ª—å–Ω–µ–µ
   ```

3. **–£–º–µ–Ω—å—à–∏—Ç—å `energyFloor` –≤ RouterConfig:**
   ```swift
   energyFloor: 0.0001  // –ü–æ—á—Ç–∏ –Ω—É–ª–µ–≤–æ–π –ø–æ—Ä–æ–≥
   ```

4. **–î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ SpikeRouter:**
   ```swift
   print("Packet \(packet.streamID): energy=\(packet.energy) -> \(energyDecayed)")
   ```

---

## –ò—Ç–æ–≥–∏ —Å–µ—Å—Å–∏–∏

‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫–ª—é—á–µ–≤—ã–µ –±–∞–≥–∏** –≤ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞—Ö –∏ —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–µ  
‚úÖ **–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç** –ø–æ—Å–ª–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤  
‚úÖ **–ì–æ—Ç–æ–≤–∞ –æ—Å–Ω–æ–≤–∞ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏** (–±–µ–∑ –æ–±—É—á–µ–Ω–∏—è)  
üü° **–û–±—É—á–µ–Ω–∏–µ –µ—â—ë –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ** ‚Äî —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç  
üü° **UI –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω**, –Ω–æ –¥–∞–Ω–Ω—ã–µ –≥–æ—Ç–æ–≤—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

**–í—Ä–µ–º—è —Å–µ—Å—Å–∏–∏:** ~2 —á–∞—Å–∞  
**–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 6  
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~150 –∏–∑–º–µ–Ω–µ–Ω–∏–π
